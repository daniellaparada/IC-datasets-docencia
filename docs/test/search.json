[
  {
    "objectID": "03_test_hipotesis.html",
    "href": "03_test_hipotesis.html",
    "title": "3  Test de hipótesis",
    "section": "",
    "text": "4 Acerca de los datos\nA continuación, se detallan aspectos de los datasets que conformaron el dataset reducido para el desarrollo del ejemplo, a la vez que se incluyen las fuentes de los datos y el código utilizado para pre-procesarlo con la sintaxis de tidyverse. De esta forma, puede fácilmente replicarse y/o adaptarse si así se lo desea.\nTambién se incluye el enlace de descarga al dataset reducido, clima-flujo.csv, con el que se desarrolló el ejemplo.\nLas librerías usadas para el desarrollo de este ejemplo, así como la información de la sesión de R, se muestran en el código que sigue.\nCódigo\nrequire(ggplot2)\nrequire(tidyverse)\nrequire(ggfortify)\nrequire(plotly)\nrequire(vroom)\nrequire(effsize)\nrequire(sf)\nrequire(osmdata)\nrequire(ggmap)\nrequire(leaflet)\nCódigo\nsessionInfo()\n\n\nR version 4.2.3 (2023-03-15 ucrt)\nPlatform: x86_64-w64-mingw32/x64 (64-bit)\nRunning under: Windows 10 x64 (build 22621)\n\nMatrix products: default\n\nlocale:\n[1] LC_COLLATE=Spanish_Argentina.utf8  LC_CTYPE=Spanish_Argentina.utf8   \n[3] LC_MONETARY=Spanish_Argentina.utf8 LC_NUMERIC=C                      \n[5] LC_TIME=Spanish_Argentina.utf8    \n\nattached base packages:\n[1] stats     graphics  grDevices utils     datasets  methods   base     \n\nother attached packages:\n [1] leaflet_2.1.2    ggmap_3.0.2      osmdata_0.2.3    sf_1.0-13       \n [5] effsize_0.8.1    vroom_1.6.1      plotly_4.10.1    ggfortify_0.4.16\n [9] lubridate_1.9.2  forcats_1.0.0    stringr_1.5.0    dplyr_1.1.2     \n[13] purrr_1.0.1      readr_2.1.4      tidyr_1.3.0      tibble_3.2.1    \n[17] tidyverse_2.0.0  ggplot2_3.4.2   \n\nloaded via a namespace (and not attached):\n [1] httr_1.4.5              bit64_4.0.5             jsonlite_1.8.4         \n [4] viridisLite_0.4.2       sp_1.6-1                yaml_2.3.7             \n [7] pillar_1.9.0            lattice_0.21-8          glue_1.6.2             \n[10] digest_0.6.31           RColorBrewer_1.1-3      colorspace_2.1-0       \n[13] leaflet.providers_1.9.0 htmltools_0.5.5         plyr_1.8.8             \n[16] pkgconfig_2.0.3         scales_1.2.1            jpeg_0.1-10            \n[19] tzdb_0.3.0              timechange_0.2.0        proxy_0.4-27           \n[22] generics_0.1.3          farver_2.1.1            ellipsis_0.3.2         \n[25] withr_2.5.0             lazyeval_0.2.2          cli_3.6.1              \n[28] magrittr_2.0.3          crayon_1.5.2            evaluate_0.20          \n[31] fansi_1.0.4             class_7.3-21            tools_4.2.3            \n[34] data.table_1.14.8       hms_1.1.3               RgoogleMaps_1.4.5.3    \n[37] lifecycle_1.0.3         munsell_0.5.0           compiler_4.2.3         \n[40] e1071_1.7-13            rlang_1.1.0             classInt_0.4-9         \n[43] units_0.8-2             grid_4.2.3              rstudioapi_0.14        \n[46] htmlwidgets_1.6.2       crosstalk_1.2.0         bitops_1.0-7           \n[49] labeling_0.4.2          rmarkdown_2.21          gtable_0.3.3           \n[52] DBI_1.1.3               R6_2.5.1                gridExtra_2.3          \n[55] knitr_1.42              fastmap_1.1.1           bit_4.0.5              \n[58] utf8_1.2.3              KernSmooth_2.23-20      stringi_1.7.12         \n[61] parallel_4.2.3          Rcpp_1.0.10             vctrs_0.6.1            \n[64] png_0.1-8               tidyselect_1.2.0        xfun_0.39"
  },
  {
    "objectID": "03_test_hipotesis.html#exploración-inicial",
    "href": "03_test_hipotesis.html#exploración-inicial",
    "title": "3  Test de hipótesis",
    "section": "3.1 Exploración inicial",
    "text": "3.1 Exploración inicial\nLos datos de flujo vehicular de la Ciudad de Buenos Aires reportan, por hora, la cantidad de vehículos registrados por radares ubicados en diferentes puntos de algunas autopistas de la ciudad.\nEn el siguiente mapa se muestra el total de flujo vehicular para cada uno de los radares durante 2019.\n\n\nCódigo\n# \"CartoDB.VoyagerLabelsUnder\"\nmapa19 &lt;-flujo19 %&gt;%\n  leaflet(options = leafletOptions(attributionControl=FALSE))%&gt;%\n  addProviderTiles(\"CartoDB.VoyagerLabelsUnder\",\n                   options = providerTileOptions(opacity=0.8)) %&gt;%\n  addCircleMarkers(lng= ~long, \n                   lat= ~lat,\n                   fillOpacity=0.9,\n                   radius=~100*n/(sum(n)),\n                   weight=1,\n                   color = ~paleta(n),\n                   stroke = FALSE)\nmapa19\n\n\n\n\n\n\nComo puede observarse en el mapa, el radar ubicado en la Autopista Lugones altura ESMA (RD 171), es el que mayor flujo registra para el año considerado. Los datos de 2023, que al momento de producir este documento solo se encuentran disponibles para el primer trimestre del año, exhiben una tendencia similar (a efectos creativos, se representan sobre un mapa en formato acuarelas, conocer más).\n\n\nCódigo\n# Radares\n# \"CartoDB.VoyagerLabelsUnder\"\nmapa23 &lt;-flujo23%&gt;%\n  leaflet(options = leafletOptions(attributionControl=FALSE))%&gt;%\n  addProviderTiles(\"Stamen.Watercolor\",\n                   options = providerTileOptions(opacity=0.8)) %&gt;%\n  addCircleMarkers(lng= ~long, \n                   lat= ~lat,\n                   fillOpacity=0.9,\n                   radius=~100*n/(sum(n)),\n                   weight=1,\n                   color = ~paleta(n),\n                   stroke = FALSE)\nmapa23\n\n\n\n\n\n\nPara lo que sigue, trabajamos con el dataset reducido flujo-vehicular.csv en el que se incluyen datos del flujo vehicular de los días hábiles del primer trimestre de 2019 y de 2023 para el radar RD 171 ubicado en la Autopista Lugones, altura ESMA, sentido A.\nEl dataset flujo-vehicular.csv se encuentra acá. A continuación, se muestran 10 datos de dicho conjunto.\n\n\nCódigo\nknitr::kable(datos[1:10,], caption = \"Dataset reducido, primeras 10 observaciones.\")\n\n\n\nDataset reducido, primeras 10 observaciones.\n\n\nfecha\nn19\nn23\n\n\n\n\n01-02\n108550\n108794\n\n\n01-03\n118754\n114959\n\n\n01-04\n120250\n117394\n\n\n01-09\n49684\n118142\n\n\n01-10\n121533\n119916\n\n\n01-11\n123864\n120939\n\n\n01-16\n27560\n119623\n\n\n01-17\n121897\n118654\n\n\n01-18\n123497\n119748\n\n\n01-23\n121223\n118691\n\n\n\n\n\nCada observación corresponde al flujo total detectado por ese radar de un día que resultó hábil tanto en 2019 como en 2023. La elección de los años responde a lo siguiente: - los datos de 2020 y 2021 van a encontrarse influenciados por las restricciones de circulación de la pandemia de COVID-19 y la paulatina vuelta a la presencialidad, - los datos de 2022 no se encuentran disponibles para el año completo, sino para algunos meses al inicio y al fin del año.\nComo puede verse en el siguiente gráfico, existe una tendencia temporal que incide en el flujo vehicular del trimestre para ambos años.\n\n\n\n\n\n\nLas observaciones que se encuentran más alejadas de la recta identidad, corresponden a los días 20 y 21 de febrero de 2023, ambos feriados de carnaval, y a los días 9 y 16 de enero de 2019, ambos lunes, de posible retorno a la ciudad por recambio turístico. Removemos estas observaciones para lo que sigue.\n\n\n\n\n\n\nLos datos exhiben una estacionalidad que, naturalmente, afecta al usual supuesto de independencia: el flujo es creciente, para ambos años, a medida que transcurren los días durante el primer trimestre. Sumado a eso, el emparejamiento de los días por su simple correspondencia de fecha podría no ser comparable, salvo excepciones o hitos de cada año.\nPor ejemplo, la observación del 24 de enero de 2019 podría no ser comparable con la equivalente de 2023, aunque sí, quizás, con el de alguna fecha próxima a ella. Por la limitación de los datos disponibles para 2023, no es posible considerar otro tipo de agrupamientos. Sin embargo y pese a esto, el flujo vehicular registrado por ese radar parecer ser sistemáticamente menor en 2023 en relación con 2019."
  },
  {
    "objectID": "03_test_hipotesis.html#test-para-diferencia-de-medias-datos-apareados-primer-trimestre-2019-vs-2023",
    "href": "03_test_hipotesis.html#test-para-diferencia-de-medias-datos-apareados-primer-trimestre-2019-vs-2023",
    "title": "3  Test de hipótesis",
    "section": "3.2 Test para diferencia de medias (datos apareados: primer trimestre 2019 vs 2023)",
    "text": "3.2 Test para diferencia de medias (datos apareados: primer trimestre 2019 vs 2023)\nBajo ciertos reparos, puede ponerse a prueba la hipótesis anterior, asumiendo que algo de la estacionalidad observada puede resolverse apareando los datos. Más precisamente, un gráfico de las diferencias entre el flujo de 2019 y el de 2023 para los días considerados parece dar cuenta de tal efecto.\n\n\n\n\n\n\nParte de la estacionalidad parece haberse corregido y la media observada para las diferencias, que debería ser cercana a 0 en caso de no haber diferencias, se observa desplazada sugiriendo un flujo promedio mayor en 2019.\nRealizamos un test t para muestras apareadas a nivel \\(1\\%\\).\n\n\n\n\n\n\n\n\n    Paired t-test\n\ndata:  flujosout$n19 and flujosout$n23\nt = 4.9782, df = 27, p-value = 0.0000323\nalternative hypothesis: true mean difference is not equal to 0\n99 percent confidence interval:\n 1651.119 5795.881\nsample estimates:\nmean difference \n         3723.5 \n\n\n\nCohen's d\n\nd estimate: 0.4958838 (small)\n95 percent confidence interval:\n    lower     upper \n0.2842526 0.7075150 \n\n\nEn efecto, el \\(p-\\)valor es \\(0.0000323\\), y a partir de esta muestra y bajo las consideraciones ya mencionadas, rechazaríamos el supuesto de igualdad de flujos medios para ambos años, durante días hábiles del primer trimestre en ese radar. El tamaño del efecto parece ser moderado."
  },
  {
    "objectID": "03_test_hipotesis.html#incorporamos-datos-de-clima",
    "href": "03_test_hipotesis.html#incorporamos-datos-de-clima",
    "title": "3  Test de hipótesis",
    "section": "3.3 Incorporamos datos de clima",
    "text": "3.3 Incorporamos datos de clima\nPara lo que sigue, trabajamos con el dataset reducido flujo-clima.csv en el que se incluyen datos del flujo vehicular del primer trimestre de 2023 para el radar RD 171 ubicado en la Autopista Lugones, altura ESMA, sentido A, junto con datos de temperatura promedio y precipitaciones.\nEl dataset flujo-clima.csv se encuentra acá. A continuación, se muestran 10 datos de dicho conjunto.\nUn gráfico del flujo vehicular por tipo de día y según nivel de precipitaciones, parece mostrar lo esperado: el el flujo vehicular en ese punto de la ciudad es mayor los días de semana que los fines de semana. Sin embargo, no parece haber una tendencia notable que impacte en el flujo vehicular a partir de las precipitaciones. Dicha tendencia podría ser creciente, asumiendo que los días en que se registran mayores niveles de precipitaciones más personas utilizan el auto; o bien decreciente, sugiriendo que hay menor tránsito vehicular porque las personas prefieren suspender aquellas actividades fuera de sus hogares que no sean esenciales.\nAlgunas preguntas que pueden surgir a partir del gráfico son, por ejemplo:\n\n¿Hay diferencia en el flujo vehicular medio de los días de semana cuando llueve?\n¿Hay diferencia en el flujo vehicular medio de los días miércoles respecto de los días viernes?\n\nSiempre, claro, recordando que estamos restringiendo el análisis al flujo vehicular detectado por el radar RD171, en la autopista Lugones, altura Esma.\nComo hicimos antes, para lo que sigue, descartamos las observaciones correspondientes a los días 20 y 21 de febrero y 24 de marzo, únicos feriados nacionales del trimestre.\nDel total de días hábiles, entonces, tenemos \\(19\\) observaciones que resultan de días de semana con lluvia, y \\(43\\) observaciones para días de semana sin lluvia.\n\n\nCódigo\n# Días de semana con lluvia: 19 datos\ndatos1 &lt;- flujoclima %&gt;%\n  filter(prcp&gt;0, \n         tipo_dia == \"Lunes a viernes\")\n\n# Días de semana sin lluvia: 43 datos\ndatos2 &lt;- flujoclima %&gt;%\n  filter(prcp==0, \n         tipo_dia == \"Lunes a viernes\")\n\nboxplot(datos1$n,datos2$n, col=c(\"firebrick\",\"springgreen4\"),\n        names=c(\"Lluvia\", \"Sin lluvia\"))\n\n\n\n\n\nRealizamos un test t para diferencia de medias.\n\n\nCódigo\n# Test para diferencia de medias\nt.test(x = datos1$n, y = datos2$n, alternative = \"two.sided\",\n       mu = 0, paired = FALSE, conf.level = 0.95)\n\n\n\n    Welch Two Sample t-test\n\ndata:  datos1$n and datos2$n\nt = 0.3956, df = 29.359, p-value = 0.6953\nalternative hypothesis: true difference in means is not equal to 0\n95 percent confidence interval:\n -3883.205  5746.884\nsample estimates:\nmean of x mean of y \n 127948.4  127016.6 \n\n\nCódigo\ncohen.d(d = datos1$n, f = datos2$n, paired = FALSE)\n\n\n\nCohen's d\n\nd estimate: 0.1173876 (negligible)\n95 percent confidence interval:\n     lower      upper \n-0.4340511  0.6688262 \n\n\nCon un \\(p-\\)valor de \\(0.6953\\), no hay evidencia en la muestra para rechazar la hipótesis de igualdad de flujos medios. Es decir, a partir de la evidencia provista por la muestra, no es posible descartar que el flujo vehicular medio en días sin lluvia difiera del flujo medio cuando llueve.\nPodemos hacer otro test para ver si hay diferencia significativa para suponer que el flujo medio de los miércoles difiere del de los lunes. Las observaciones son menos, ya que en el primer trimestre solo se registran \\(13\\) miércoles y \\(12\\) viernes, considerando que se removió el 24 de marzo.\n\n\nCódigo\n# Días de semana con lluvia: 13 datos\ndatos1 &lt;- flujoclima %&gt;%\n  filter(dia == \"miércoles\")\n\n# Días de semana sin lluvia: 13 datos\ndatos2 &lt;- flujoclima %&gt;%\n  filter(dia == \"viernes\")\n\nboxplot(datos1$n,datos2$n, col=c(\"firebrick\",\"springgreen4\"),\n        names=c(\"Miércoles\", \"Viernes\"))\n\n\n\n\n\n\n\nCódigo\nt.test(x = datos1$n, y = datos2$n, alternative = \"two.sided\",\n       mu = 0, paired = FALSE, conf.level = 0.95)\n\n\n\n    Welch Two Sample t-test\n\ndata:  datos1$n and datos2$n\nt = -0.58982, df = 17.355, p-value = 0.5629\nalternative hypothesis: true difference in means is not equal to 0\n95 percent confidence interval:\n -9601.871  5401.114\nsample estimates:\nmean of x mean of y \n 127669.5  129769.9 \n\n\nCódigo\ncohen.d(d = datos1$n, f = datos2$n, paired = FALSE)\n\n\n\nCohen's d\n\nd estimate: -0.2410676 (small)\n95 percent confidence interval:\n     lower      upper \n-1.0721910  0.5900558 \n\n\nNuevamente, y con un \\(p-\\)valor de \\(0.5629\\), concluimos que no hay evidencia en la muestra para rechazar la hipótesis de igualdad de flujos medios entre esos días, algo que al “ojo desnudo” podría parecer significativo. Ocurre, sin embargo, que la variabilidad exhibida en los flujos de los días viernes, parece ser mayor, como se observa en ambos gráficos previos. Una comparación que sí esperaría conducir a un rechazo de la igualdad de flujos medios podría ser la de miércoles y sábados.\n\n\nCódigo\n# Días de semana con lluvia: 13 datos\ndatos1 &lt;- flujoclima %&gt;%\n  filter(dia == \"miércoles\")\n\n# Días de semana sin lluvia: 13 datos\ndatos2 &lt;- flujoclima %&gt;%\n  filter(dia == \"sábado\")\n\nboxplot(datos1$n,datos2$n, col=c(\"firebrick\",\"springgreen4\"),\n        names=c(\"Miércoles\", \"Sábado\"))\n\n\n\n\n\n\n\nCódigo\nt.test(x = datos1$n, y = datos2$n, alternative = \"two.sided\",\n       mu = 0, paired = FALSE, conf.level = 0.95)\n\n\n\n    Welch Two Sample t-test\n\ndata:  datos1$n and datos2$n\nt = 6.9421, df = 18.759, p-value = 0.000001382\nalternative hypothesis: true difference in means is not equal to 0\n95 percent confidence interval:\n 15757.64 29377.77\nsample estimates:\nmean of x mean of y \n 127669.5  105101.8 \n\n\nCódigo\ncohen.d(d = datos1$n, f = datos2$n, paired = FALSE)\n\n\n\nCohen's d\n\nd estimate: 2.82569 (large)\n95 percent confidence interval:\n   lower    upper \n1.655577 3.995802 \n\n\nEl test arroja un \\(p-\\)valor prácticamente nulo: podemos concluir que hay evidencia en la muestra para rechazar la hipótesis de igualdad de flujos medios entre los días miércoles y los días sábados. Además, el tamaño del efecto es grande."
  },
  {
    "objectID": "03_test_hipotesis.html#sobre-el-dataset-de-clima",
    "href": "03_test_hipotesis.html#sobre-el-dataset-de-clima",
    "title": "3  Test de hipótesis",
    "section": "4.1 Sobre el dataset de clima",
    "text": "4.1 Sobre el dataset de clima\nLos datos de este ejemplo corresponden a datos de clima del año 2023 tomados de la base de datos meteorológicos y climáticos de MeteoStat (disponibles acá). En particular, se consideran los datos de la estación meteorológica de Aeroparque (ID 87582) y un conjunto reducido de variables para el período considerado.\n\n\nCódigo\nclima &lt;- read_csv(\"./fuente/03_test_hipotesis/registro_tiempo_aeroparque_2023.csv\") %&gt;% \n  select(c(1:5,7:8,10))"
  },
  {
    "objectID": "03_test_hipotesis.html#sobre-el-dataset-de-flujo-vehicular",
    "href": "03_test_hipotesis.html#sobre-el-dataset-de-flujo-vehicular",
    "title": "3  Test de hipótesis",
    "section": "4.2 Sobre el dataset de flujo vehicular",
    "text": "4.2 Sobre el dataset de flujo vehicular\nLos datos de este ejemplo corresponden a datos de flujo vehicular registrado en ciertos radares de AUSA, por hora, en la Ciudad de Buenos Aires para los años 2019 y 2023 (disponibles acá).\nAlgunas consideraciones, a la fecha, respecto de estos datos:\n\nLos datasets se encuentran disponibles para los años 2019 a 2023.\nNo todos tienen el mismo formato para el tratamiento de la fecha.\nLos datos de 2022 no están completos.\nLos datos de 2023 se encuentran disponibles al primer trimestre.\nLas coordenadas que georeferencian cada uno de los radares se encuentran “sucias” en los datos de 2023. En este capítulo se propuso una posible limpieza."
  },
  {
    "objectID": "03_test_hipotesis.html#dataset-pre-procesado-clima-flujo.csv",
    "href": "03_test_hipotesis.html#dataset-pre-procesado-clima-flujo.csv",
    "title": "3  Test de hipótesis",
    "section": "4.3 Dataset pre-procesado: clima-flujo.csv",
    "text": "4.3 Dataset pre-procesado: clima-flujo.csv\nPara reducir los datos al estudio de interés, se crea un dataset conjunto, clima-flujo.csv, a partir de los datos de flujo vehicular del primer trimestre de 2023 para el radar RD171 y de clima, en el que se dispone de las siguientes variables.\n\nfecha: fecha, en el formato mes-día.\nn: flujo vehicular de la fecha indicada.\ntavg: temperatura media (°C) registrada en esa fecha.\nprcp: precipitaciones (mm) registrada en esa fecha.\ndia: día de la semana de la fecha indicada.\ntipo_dia: tipo de día (Fin de semana o Lunes a viernes) de la fecha indicada."
  },
  {
    "objectID": "references.html",
    "href": "references.html",
    "title": "Bibliografía",
    "section": "",
    "text": "Ver si va (ejemplo dummy)"
  }
]